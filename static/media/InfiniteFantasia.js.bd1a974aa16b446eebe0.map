{:version=>3, :sections=>[{:offset=>{:line=>0, :column=>0}, :map=>{:version=>3, :sourceRoot=>"", :sources=>["bcdice/game_system/InfiniteFantasia.rb"], :sourcesContent=>["# frozen_string_literal: true\n\nmodule BCDice\n  module GameSystem\n    class InfiniteFantasia < Base\n      # ゲームシステムの識別子\n      ID = 'InfiniteFantasia'\n\n      # ゲームシステム名\n      NAME = '無限のファンタジア'\n\n      # ゲームシステム名の読みがな\n      SORT_KEY = 'むけんのふあんたしあ'\n\n      # ダイスボットの使い方\n      HELP_MESSAGE = <<~INFO_MESSAGE_TEXT\n        1D20に目標値を設定した場合に、成功レベルの自動判定を行います。\n        例： 1D20<=16\n      INFO_MESSAGE_TEXT\n\n      # ゲーム別成功度判定(1d20)\n      def result_1d20(total, _dice_total, cmp_op, target)\n        return Result.nothing if target == '?'\n        return nil unless cmp_op == :<=\n\n        if total > target\n          return Result.failure(\"失敗\")\n        end\n\n        output =\n          if total <= (target / 32).to_i\n            \"32レベル成功(32Lv+)\"\n          elsif total <= (target / 16).to_i\n            \"16レベル成功(16Lv+)\"\n          elsif total <= (target / 8).to_i\n            \"8レベル成功\"\n          elsif total <= (target / 4).to_i\n            \"4レベル成功\"\n          elsif total <= (target / 2).to_i\n            \"2レベル成功\"\n          else\n            \"1レベル成功\"\n          end\n\n        Result.new.tap do |r|\n          r.text = output\n          r.success = true\n          if total <= 1\n            r.critical = true\n            r.text += \"/クリティカル\"\n          end\n        end\n      end\n    end\n  end\nend\n"], :names=>["<main>", "<module:BCDice>", "<module:GameSystem>", "<class:InfiniteFantasia>", "result_1d20", "total", "_dice_total", "cmp_op", "target", "Result", "nothing", ">", "failure", "output", "<=", "/", "32", "to_i", "16", "8", "4", "2", "tap", "new", "block in result_1d20", "r", "block (2 levels) in result_1d20", "text=", "success=", "1", "critical=", "+", "text", "Base"], :mappings=>"AAAAA,2BAAAA;EAAAA;;EAEAA,OAAAC;EAAAA;;IAAAA;;IACEA,OAAAC;IAAAA;;MAAAA;;MACEA,OAAAC;MAAAA;;QAAAA;;;QAEE,8BAAKA,kBAAL;QAGA,gCAAOA,WAAP;QAGA,oCAAWA,YAAX;QAGA,wCACNA,qCADqB,GAErBA,eAFM;QAMAA,OAAAC,2BAAAA,uBAAgBC,KAAD,EAAQC,WAAR,EAAqBC,MAArB,EAA6BC,MAA5CJ;AAAAA,UAAAA;;;UACE,IAAA,MAAyBI,MAAzB,EAAmCJ,GAAnC,CAAA;YAAA,OAAOK,YAAMC,SAAAA,CAAAA;UAAb;UACA,KAAA,MAAkBH,MAAlB,EAA4B,IAA5B,CAAA;YAAA,OAAO;UAAP;UAEA,IAAA,QAASI,OAANN,KAAMM,EAAEH,MAAFG,CAAT,CAAA;YACE,OAAOF,YAAMG,SAAAA,CAASR,IAATQ;UADf;UAIAC,SACE,CAAA,QAASC,OAANT,KAAMS,EAAWC,WAAPP,MAAOO,EAAEC,EAAFD,CAAKE,MAAAA,CAAAA,CAAhBH,CAAT,CAAA,GAAA,CACEV,gBADF,IAEA,CAAA,QAAYU,OAANT,KAAMS,EAAWC,WAAPP,MAAOO,EAAEG,EAAFH,CAAKE,MAAAA,CAAAA,CAAhBH,CAAZ,CAAA,GAAA,CACEV,gBADF,IAEA,CAAA,QAAYU,OAANT,KAAMS,EAAWC,WAAPP,MAAOO,EAAEI,CAAFJ,CAAIE,MAAAA,CAAAA,CAAfH,CAAZ,CAAA,GAAA,CACEV,QADF,IAEA,CAAA,QAAYU,OAANT,KAAMS,EAAWC,WAAPP,MAAOO,EAAEK,CAAFL,CAAIE,MAAAA,CAAAA,CAAfH,CAAZ,CAAA,GAAA,CACEV,QADF,IAEA,CAAA,QAAYU,OAANT,KAAMS,EAAWC,WAAPP,MAAOO,EAAEM,CAAFN,CAAIE,MAAAA,CAAAA,CAAfH,CAAZ,CAAA,GAAA,CACEV,QADF,IAAA,CAGEA,QAHF,CAAA,CAFA,CAFA,CAFA,CAFA;UAcFA,OAAUkB,MAAVb,YAAMc,KAAAA,CAAAA,CAAID,OAAAA,EAAAA,EAAAA,EAAVE,aAAmBC,CAAnBD,EAAAE;;;YAAmB;YACjBD,CAACE,UAAAA,CAAQd,MAARc;YACDF,CAACG,aAAAA,CAAW,IAAXA;YACD,IAAA,QAASd,OAANT,KAAMS,EAAGe,CAAHf,CAAT,CAAA;;cACEW,CAACK,cAAAA,CAAY,IAAZA;cACDJ,OAACC,MAAAA,CAAAI,SAADN,CAACO,MAAAA,CAAAA,CAAAD,EAASL,SAATK,CAAAJ,CAAAA,EAAAA,MAADF,CAACE,SAAAA,EAAAA,EAAAA,CAAAA,EAAAA;YAFH;cA/CVD,OAAA;YA+CU,EAHFF,CAAUF;QAvBZlB,CAAAA;MAjBFD,GAAAA,WAAAA,EAAyB8B,UAAzB9B;IADFD,GAAAA,WAAAA;EADFD,GAAAA,WAAAA;AAFAD;"}}]}