{:version=>3, :sections=>[{:offset=>{:line=>0, :column=>0}, :map=>{:version=>3, :sourceRoot=>"", :sources=>["bcdice/game_system/SajinsenkiAGuS.rb"], :sourcesContent=>["# frozen_string_literal: true\n\nmodule BCDice\n  module GameSystem\n    class SajinsenkiAGuS < Base\n      # ゲームシステムの識別子\n      ID = 'SajinsenkiAGuS'\n\n      # ゲームシステム名\n      NAME = '砂塵戦機アーガス'\n\n      # ゲームシステム名の読みがな\n      SORT_KEY = 'さしんせんきああかす'\n\n      # ダイスボットの使い方\n      HELP_MESSAGE = <<~INFO_MESSAGE_TEXT\n        ・一般判定Lv（チャンス出目0→判定0） nAG+x\n        　　　nは習得レベル、Lv0の場合nの省略可能。xは判定値修正（数式による修正可）、省略した場合はレベル修正0\n        　　　例）AG:習得レベル0の一般技能、1AG+1:習得レベル1・判定値修正+1の技能、AG+2-1：習得レベル0・判定値修正2-1の技能、(1-1)AG：習得レベル1・レベル修正-1の技能\n\n        ・適正距離での命中判定（チャンス出目0→判定0、HR算出）OM+y@z\n        　　　yは命中補正値（数式可）、zはクリティカル値。クリティカル値省略時は0\n        　　　HRの算出時には、HRが大きくなる場合に出目0を10に読み替えます。\n        　　　例）OM+18-6@2:命中補正値+18-6でクリティカル値2、適正距離の判定\n\n        ・非適正距離での命中判定（チャンス出目0→判定0、HR算出）NM+y@z\n        　　　yは命中補正値（数式可）、zはクリティカル値。クリティカル値省略時は0\n        　　　HRの算出時には、HRが大きくなる場合に出目0を10に読み替えます。\n        　　　例）NM+4-3:命中補正値+4-3で非適正距離の判定\n\n        ・クリティカル表 CR\n\n        ※通常の1D10などの10面ダイスにおいて出目10の読み替えはしません。コマンドのみです。\n\n      INFO_MESSAGE_TEXT\n      register_prefix('-?\\d*AG', 'OM', 'NM', 'CR')\n\n      def eval_game_system_specific_command(command)\n        roll_ippan(command) || roll_hit_check(command) || roll_tables(command, TABLES)\n      end\n\n      private\n\n      def roll_ippan(command)\n        m = /^(-?\\d+)?AG((?:[-+]\\d+)*)$/.match(command)\n        return nil unless m\n\n        level = m[1].to_i\n        x = Arithmetic.eval(m[2], @round_type) || 0\n        target = level <= 0 ? 7 + x : 10 + level + x\n\n        dice_list = @randomizer.roll_barabara(2, 10).map { |d| d == 10 ? 0 : d }\n        total = dice_list.sum\n        success_level = 1 + dice_list.count { |val| val <= level }\n\n        return Result.new.tap do |result|\n          result.condition = total <= target\n          result.rands = dice_list\n\n          sequence = [\n            \"(2D10<=\#{target})\",\n            \"\#{total}[\#{dice_list.join(',')}]\",\n            (\"チャンス\" if dice_list.include?(0)),\n            result.success? ? \"成功(+\#{success_level})\" : \"失敗\"\n          ].compact\n\n          result.text = sequence.join(\" ＞ \")\n        end\n      end\n\n      # 命中判定＆HR算出\n      def roll_hit_check(command)\n        parser = Command::Parser.new(\"OM\", \"NM\", round_type: @round_type).enable_critical\n        parsed = parser.parse(command)\n        return nil unless parsed\n\n        if parsed.command == \"OM\"\n          return roll_om(parsed)\n        elsif parsed.command == \"NM\"\n          return roll_nm(parsed)\n        end\n      end\n\n      def roll_om(parsed)\n        target = parsed.modify_number\n        critical = parsed.critical || 0\n\n        dice_list = @randomizer.roll_barabara(2, 10).map { |v| v == 10 ? 0 : v }.sort.reverse\n\n        total = dice_list.sum()\n        criticals = dice_list.count { |v| v <= critical }\n        hr = calc_hr(target, dice_list)\n\n        return Result.new.tap do |r|\n          r.condition = total <= target\n          r.rands = dice_list\n          r.critical = criticals >= 1\n          r.text = [\n            \"(2D10<=\#{target})\",\n            \"\#{total}[\#{dice_list.join(',')}]\",\n            (\"チャンス\" if dice_list.include?(0)),\n            r.success? ? \"成功（HR=\#{hr}、クリティカル\#{criticals}）\" : \"失敗\",\n          ].compact.join(\" ＞ \")\n        end\n      end\n\n      def roll_nm(parsed)\n        target = parsed.modify_number\n        critical = parsed.critical || 0\n\n        dice_list = @randomizer.roll_barabara(3, 10).map { |v| v == 10 ? 0 : v }.sort.reverse\n\n        chosen_dice_list = dice_list.take(2)\n        total = chosen_dice_list.sum()\n        criticals = chosen_dice_list.count { |v| v <= critical }\n        hr = calc_hr(target, chosen_dice_list)\n\n        return Result.new.tap do |r|\n          r.condition = total <= target\n          r.rands = dice_list\n          r.critical = criticals >= 1\n          r.text = [\n            \"(3D10<=\#{target})\",\n            \"\#{total}[\#{dice_list[0]},\#{dice_list[1]}&\#{dice_list[2]}]\",\n            (\"チャンス\" if chosen_dice_list.include?(0)),\n            r.success? ? \"成功（HR=\#{hr}、クリティカル\#{criticals}）\" : \"失敗\",\n          ].compact.join(\" ＞ \")\n        end\n      end\n\n      def calc_hr(target, chosen_dice_list)\n        total = chosen_dice_list.sum()\n        a = (target - total).abs\n        b = (target - total - chosen_dice_list.count(0) * 10).abs\n        return [a, b].max\n      end\n\n      TABLES = {\n        \"CR\" => DiceTable::Table.new(\n          \"クリティカル表\",\n          \"1D10\",\n          [\n            \"1：「小破」ダメージ+［5］。耐久値-［1］\",\n            \"2：「小破」ダメージ+［5］。耐久値-［1］\",\n            \"3：「小破」ダメージ+［5］。耐久値-［1］\",\n            \"4：「小破」ダメージ+［5］。耐久値-［1］\",\n            \"5：「兵装」損壊を受けるごとに［1D10］を振り、出目に応じた部位の兵装とオプションが《脱落》\",\n            \"6：「上体」攻撃系能力［白兵/ 火器/ 索敵］は各［- 損壊Lv］\",\n            \"7：「脚部」行動系・防御系能力［Iv 値（イニシア値）/ 最大MP/ 回避］は各［- 損壊Lv］\",\n            \"8：「搭乗者」搭乗者の〈最大HP〉および〈HP〉は［-（4 ×損壊Lv）］\",\n            \"9：「搭乗者」搭乗者の〈最大HP〉および〈HP〉は［-（4 ×損壊Lv）］\",\n            \"0：「小破」ダメージ+［5］。耐久値-［1］\",\n          ]\n        )\n      }.freeze\n    end\n  end\nend\n"], :names=>["<top (required)>", "<module:BCDice>", "<module:GameSystem>", "<class:SajinsenkiAGuS>", "self", "register_prefix", "eval_game_system_specific_command", "command", "$ret_or_1", "$ret_or_2", "roll_ippan", "roll_hit_check", "roll_tables", "TABLES", "private", "m", "match", "level", "[]", "1", "to_i", "x", "Arithmetic", "eval", "2", "@round_type", "0", "target", "<=", "+", "7", "10", "dice_list", "map", "@randomizer", "roll_barabara", "block in roll_ippan", "d", "block (2 levels) in roll_ippan", "total", "sum", "success_level", "count", "val", "tap", "Result", "new", "result", "condition=", "rands=", "sequence", "join", "include?", "success?", "compact", "text=", "parser", "Command::Parser", "Command", "enable_critical", "parsed", "parse", "roll_om", "roll_nm", "modify_number", "critical", "block in roll_om", "v", "block (2 levels) in roll_om", "sort", "reverse", "criticals", "hr", "calc_hr", "r", "critical=", ">=", "3", "block in roll_nm", "block (2 levels) in roll_nm", "chosen_dice_list", "take", "a", "-", "abs", "b", "*", "max", "DiceTable::Table", "DiceTable", "freeze", "Base"], :mappings=>"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"}}, {:offset=>{:line=>168, :column=>0}, :map=>{:version=>3, :sourceRoot=>"", :sources=>["bcdice/game_system/SajinsenkiAGuS2E.rb"], :sourcesContent=>["# frozen_string_literal: true\n\nrequire 'bcdice/game_system/SajinsenkiAGuS'\n\nmodule BCDice\n  module GameSystem\n    class SajinsenkiAGuS2E < SajinsenkiAGuS\n      # ゲームシステムの識別子\n      ID = 'SajinsenkiAGuS2E'\n\n      # ゲームシステム名\n      NAME = '砂塵戦機アーガス2ndEdition'\n\n      # ゲームシステム名の読みがな\n      SORT_KEY = 'さしんせんきああかす2'\n\n      # ダイスボットの使い方\n      HELP_MESSAGE = <<~INFO_MESSAGE_TEXT\n        ・一般判定Lv（チャンス出目0→判定0） nAG+x\n        　　　nは習得レベル、Lv0の場合nの省略可能。xは判定値修正（数式による修正可）、省略した場合はレベル修正0\n        　　　例）AG:習得レベル0の一般技能、1AG+1:習得レベル1・判定値修正+1の技能、AG+2-1：習得レベル0・判定値修正2-1の技能、(1-1)AG：習得レベル1・レベル修正-1の技能\n\n        ・適正距離での命中判定（チャンス出目0→判定0、HR算出）OM+y@z\n        　　　yは命中補正値（数式可）、zはクリティカル値。クリティカル値省略時は0\n        　　　HRの算出時には、HRが大きくなる場合に出目0を10に読み替えます。\n        　　　例）OM+18-6@2:命中補正値+18-6でクリティカル値2、適正距離の判定\n\n        ・非適正距離での命中判定（チャンス出目0→判定0、HR算出）NM+y@z\n        　　　yは命中補正値（数式可）、zはクリティカル値。クリティカル値省略時は0\n        　　　HRの算出時には、HRが大きくなる場合に出目0を10に読み替えます。\n        　　　例）NM+4-3:命中補正値+4-3で非適正距離の判定\n\n\n        ・『西風旅徨』で導入されたファンブル・ルールを用いた判定\n        　判定時にダイスがすべて8以上ならファンブル(自動失敗)です。\n        　それぞれのコマンドにWを付けると『西風旅徨』モードになります。\n        　　　・一般判定                nAGW+x\n        　　　・適正距離での命中判定    OMW+y@z\n        　　　・非適正距離での命中判定  NMW+y@z\n\n\n\n        ・クリティカル表　　 CR\n        ・鹵獲結果表　　　　 CAP\n        ・幕間クエスト表　　 INT\n        ・サルベージ表　　　 SAL\n        ・赤字ペナルティー表 DEF\n        ・特殊戦況表　　　　 SPE\n\n        ※通常の1D10などの10面ダイスにおいて出目10の読み替えはしません。コマンドのみです。\n        　ページ参照は、何もない場合は「ルールブック」、wは「西風旅徨」を示します。\n\n      INFO_MESSAGE_TEXT\n\n      def initialize(command)\n        super(command)\n        @enabled_d9 = true\n      end\n\n      def eval_game_system_specific_command(command)\n        super(command) ||\n          roll_ippan_west(command) ||\n          roll_hit_check_west(command) ||\n          roll_tables(command, SECOND_ED_TABLES)\n      end\n\n      def roll_ippan_west(command)\n        m = /AGW/.match(command)\n        return nil unless m\n\n        result = roll_ippan(command.sub(/(AG)W/) { ::Regexp.last_match(1) })\n        return change_fumble(result)\n      end\n\n      def roll_hit_check_west(command)\n        m = /[ON]MW/.match(command)\n        return nil unless m\n\n        result = roll_hit_check(command.sub(/([ON]M)W/) { ::Regexp.last_match(1) })\n        return change_fumble(result)\n      end\n\n      def change_fumble(result)\n        return nil if result.nil?\n\n        fumble_counts = result.rands.count { |val| val >= 8 }\n        if fumble_counts >= 2\n          result.text = result.text.sub(/(成功|失敗).*$/, 'ファンブル')\n          result.failure = true\n          result.success = false\n          result.fumble = true\n        end\n        return result\n      end\n\n      SECOND_ED_TABLES = {\n        \"CAP\" => DiceTable::Table.new(\n          \"鹵獲結果表\",\n          \"2D10\",\n          [\n            '0:敵A:GuS を完全な状態で鹵獲︕ ※総合価格÷ 2 で売却可。',\n            '1:敵A:GuS を完全な状態で鹵獲︕ ※総合価格÷ 2 で売却可。',\n            '2:敵A:GuS を完全な状態で鹵獲︕ ※総合価格÷ 2 で売却可。',\n            '3:敵A:GuS の兵装を鹵獲︕ ※敵A:GuS の装備している任意の兵装1つを獲得。',\n            '4:敵A:GuS の兵装を鹵獲︕ ※敵A:GuS の装備している任意の兵装1つを獲得。',\n            '5:敵A:GuS の兵装を鹵獲︕ ※敵A:GuS の装備している任意の兵装1つを獲得。',\n            '6:敵A:GuS の兵装を鹵獲︕ ※敵A:GuS の装備している任意の兵装1つを獲得。',\n            '7:敵A:GuS の兵装を鹵獲︕ ※敵A:GuS の装備している任意の兵装1つを獲得。',\n            '8:使えそうな兵装を発見︕ ※1D10 を振り、出目の部位の兵装1つを獲得。',\n            '9:使えそうな兵装を発見︕ ※1D10 を振り、出目の部位の兵装1つを獲得。',\n            '10:使えそうな兵装を発見︕ ※1D10 を振り、出目の部位の兵装1つを獲得。',\n            '11:使えそうな兵装を発見︕ ※1D10 を振り、出目の部位の兵装1つを獲得。',\n            '12:使えそうな兵装を発見︕ ※1D10 を振り、出目の部位の兵装1つを獲得。',\n            '13:使えそうな兵装を発見︕ ※1D10 を振り、出目の部位の兵装1つを獲得。',\n            '14:残念、完全にスクラップだ……。※部品代として［バランス値×300］cdtを獲得。',\n            '15:残念、完全にスクラップだ……。※部品代として［バランス値×300］cdtを獲得。',\n            '16:残念、完全にスクラップだ……。※部品代として［バランス値×300］cdtを獲得。',\n            '17:残念、完全にスクラップだ……。※部品代として［バランス値×300］cdtを獲得。',\n            '18:残念、完全にスクラップだ……。※部品代として［バランス値×300］cdtを獲得。',\n          ]\n        ),\n        \"INT\" => DiceTable::RangeTable.new(\n          \"幕間クエスト表\",\n          \"1D100\",\n          [\n            [1, '慰労 PC/クルー1名が、労ってくれる。 最大HP+4'],\n            [2..3, '感謝 PC/クルー1名が、感謝の気持ちを伝える。 最大HP+4'],\n            [4..5, '安堵 PC/ クルー1名が、安堵の気持ちを伝える。 最大HP+4'],\n            [6..7, '治療 戦闘中の怪我や急な病気で医療班のお世話になることに。 最大HP+4'],\n            [8..9, '日常 PC/クルー1名と、他愛のない日常の会話をする。 最大HP+4'],\n            [10..11, '遊興 PC/クルー1名と遊びに興じ、楽しい時を過ごす。 XP+1'],\n            [12..13, '勤労 PC/クルー1名と協力し、船内の仕事を行う。 XP+1'],\n            [14..15, '評価 PC/クルー1名が、仕事の出来を評価してくれる。 XP+1'],\n            [16..17, '調達 PC/クルー1名とともに生活品の買い出しを行うことに。 XP+1'],\n            [18..19, '社交 取引や補給などの仕事を通し、船外での社会経験を得る。 XP+1'],\n            [20..21, '注意 PC/クルー1名が、君の危険な戦闘行動について指摘する。 SP+1'],\n            [22..23, '反省 PC/クルー1名と、作戦行動の反省会を行う。 SP+1'],\n            [24..25, '鍛錬 PC/クルー1名に、模擬戦に付き合ってもらう。 SP+1'],\n            [26..27, '感心 PC/クルー1名の仕事や戦闘行動に対し、感銘を受ける。 SP+1'],\n            [28..29, '改良 整備班と協力し、A:GuSのプログラムの改良に努める。 SP+1'],\n            [30..31, '割引 兵装が割引されているのを発見し、格安で購入できる。 基本兵装1つを半額で購入可。'],\n            [32..33, '発見 クルー1名が、兵装を入手した。 基本兵装1つを半額で購入可。'],\n            [34..35, '発明 クルー1名が、兵装を開発した。 基本兵装1つを半額で購入可。'],\n            [36..37, '大発見 クルー1名が、強力な兵装を入手した！ 上級兵装1つを購入可。（p37参照）'],\n            [38..39, '大発明 クルー1名が、新たな兵装を開発した！ 上級兵装1つを購入可。（p37参照）'],\n            [40..41, '昔話 PC/クルー1名に、自分の過去について語ってしまう。 最大LP+1'],\n            [42..43, '願望 PC/クルー1名に、自分の夢や未来について語ってしまう。 最大LP+1'],\n            [44..45, '家族 PC/クルー1名に、自分の家族について語ってしまう。 最大LP+1'],\n            [46..47, '望郷 PC/クルー1名に、自分の故郷について語ってしまう。 最大LP+1'],\n            [48..49, '知人 PC/クルー1名に、自分の知人を重ね合わせてしまう。 最大LP+1'],\n            [50..51, '個人収入 チームとは関係ない個人的な商売や取引で利益を得る。 4,000cdtを獲得。'],\n            [52..53, '臨時収入 思いがけない臨時の収入が入る。 4,000cdt を獲得。'],\n            [54..55, '取引 クルー1 名と取引を行い、予算を獲得することに成功する。 4,000cdtを獲得。'],\n            [56..57, '裏取引 クルー1 名と秘密の取引を行い、見返りとして予算を獲得。 6,000cdtを獲得。'],\n            [58..59, '賞与 オーナーが特別に報酬を用意してくれた！ 6,000cdtを獲得。'],\n            [60..61, '改造 整備班とともに機体の改造に明け暮れる。 任意の改造Lv+1。（上限：2Lv）'],\n            [62..63, '鹵獲 鹵獲品の中から機体の改造に使えるものを発見。 任意の改造Lv+1。（上限：2Lv）'],\n            [64..65, '強化 案機体を強化するための画期的なアイディアを思いつく。 任意の改造Lv+1。（上限：2Lv）'],\n            [66..67, '懇願 整備班に頼みこみ、機体の改造をしてもらう。 任意の改造Lv+1。（上限：3Lv）'],\n            [68..69, '掘出物 掘出物を発見、整備班が早速機体に取り付けてくれた。 任意の改造Lv+1。（上限：3Lv）'],\n            [70..71, '募集 クルーの募集を行ったところ、何名か候補が現れた。 クルー1名を割安（20,000cdt）で雇用可。'],\n            [72..73, '勧誘 有能な人材を発見した。ぜひ雇い入れたいものだが。 クルー1名を割安（20,000cdt）で雇用可。'],\n            [74..75, '推薦 依頼人からの推薦で、クルーを1名紹介される。 クルー1名を割安（20,000cdt）で雇用可。'],\n            [76..77, '志願 クルーとして雇って欲しい、という人物が現れる。クルー1名を割安（15,000cdt）で雇用可。'],\n            [78..79, '成長 見習いクルーが大分成長してきた。もう1人前と見てもいい。クルー1名を割安（15,000cdt）で雇用可。'],\n            [80..81, '交渉 依頼人との交渉がうまくいき、少し報酬を割増ししてもらえる。 チーム予算を8,000cdt獲得。'],\n            [82..83, '節約 経費が思ったよりも節約できた。経理やオーナーの機嫌が良い。 チーム予算を8,000cdt獲得。'],\n            [84..85, '賞金 今回の敵は賞金がかかっていたようで臨時収入が入った。 チーム予算を8,000cdt獲得。'],\n            [86..87, '名声 チームの名声が高まっており、クルーの自尊心が刺激される。 チーム予算を12,000cdt獲得。'],\n            [88..89, '一致団結 オーナーからの労いがあり、クルー一同の結束力が高まる。 チーム予算を12,000cdt獲得。'],\n            [90..91, '点検 PC/クルー1名とシップに異状がないか点検作業を行う。 拠点AP+10。'],\n            [92..93, '補修 整備班とともにくたびれたシップの改装作業を行う。 拠点AP+10。'],\n            [94..95, '全面改修 艦内の問題箇所を全面的に改修する。 拠点AP+10。'],\n            [96..97, '自由 行動自由気ままに好きなことをして過ごす。 00～49の任意の効果を適用可。（p69参照）'],\n            [98..99, '歓迎 街の住民にたいへんな歓迎を受ける。 50～95の任意の効果を適用可。（p69参照）'],\n            [100, '慰労 PC/クルー1名が、労ってくれる。 最大HP+4'],\n          ]\n        ),\n        \"SAL\" => DiceTable::RangeTable.new(\n          \"サルベージ表\",\n          \"1D100\",\n          [\n            [1..2, '大失敗…。大変な損失を出してしまった…。 -5,000cdt'],\n            [3..5, '失敗…。かなりの損失を出してしまった…。 -3,000cdt'],\n            [6..9, '失敗…。損失を出してしまった…。 -1,000cdt'],\n            [10, '大成功！大きな収益を上げることができた！ +5,000cdt'],\n            [11..19, '空振り……何の成果も得られなかった…。 0cdt'],\n            [20, '掘り出し物を発見！2Lv改造済の【基本携行兵装】一つを獲得！ 一般兵装（→p34）'],\n            [21..22, 'ジャンク品を発見。船の装甲強化くらいには使えそうだ。 拠点AP+［5］'],\n            [23..25, 'ジャンク品を発見。少し赤字だがまあやむを得まい。 +1,000cdt'],\n            [26..29, 'ジャンク品を発見。手間賃くらいにはなった。 +2,000cdt'],\n            [30, '掘り出し物を発見！2Lv改造済の【基本外装兵装】一つを獲得！ 一般兵装（→p35）'],\n            [31..32, '成功！少しだが利益を出すことができた！ +3,000cdt'],\n            [33..35, '成功！まずまずの利益を出すことができた！ +5,000cdt'],\n            [36..39, '大成功！大きな利益を出すことができた！ +7,000cdt'],\n            [40..41, '良質のバッテリーを獲得。 EP+［4］'],\n            [42..43, '良質の装甲版を獲得。 AP+［4］'],\n            [44, '大失敗…。大きな損失を出してしまった…。 -5,000cdt'],\n            [45, 'ブレードを獲得。 →p34'],\n            [46, 'ランスを獲得。 →p34'],\n            [47, 'アンカーブレードを獲得。 →p34'],\n            [48, 'パイルバンカーを獲得。 →p34'],\n            [49, 'ハンドガンを獲得。 →p35'],\n            [50, 'ヘビーハンドガンを獲得。 →p35'],\n            [51, 'ライフルを獲得。 →p35'],\n            [52, 'アンカーショットを獲得。 →p35'],\n            [53, 'マシンガンSを獲得。 →p35'],\n            [54, 'マシンガンLを獲得。 →p35'],\n            [55, 'ミサイルポッドSを獲得。 →p35'],\n            [56, 'ミサイルポッドLを獲得。 →p35'],\n            [57, 'バズーカを獲得。 →p35'],\n            [58, 'カノンを獲得。 →p35'],\n            [59, 'ライトシールドを獲得。 →p35'],\n            [60, 'ミドルシールドを獲得。 →p35'],\n            [61, 'ヘビーシールドを獲得。 →p35'],\n            [62, 'レーダーユニットを獲得。 →p35'],\n            [63, 'ECMユニットを獲得。 →p35'],\n            [64, 'サブブースターを獲得。 →p36'],\n            [65, 'ディフェンスサポートを獲得。 →p36'],\n            [66, 'コンバットサポートを獲得。 →p36'],\n            [67, '大失敗…。大きな損失を出してしまった…。 -5,000cdt'],\n            [68, 'ショットサポートを獲得。 →p36'],\n            [69, 'パワーローダーを獲得。 →p36'],\n            [70, 'サブバッテリーを獲得。 →p36'],\n            [71, 'サブバッテリー+を獲得。 →p36'],\n            [72, 'ファランクスを獲得。 →p36'],\n            [73, 'リアクティブアーマーを獲得。 →p36'],\n            [74, '強化装甲版を獲得。 →p36'],\n            [75, 'ヘビーマシンガンSを獲得。 →p35'],\n            [76, 'ヘビーマシンガンLを獲得。 →p35'],\n            [77, '掘り出し物を発見！25,000cdt以下の【上級外装兵装】一つを獲得！ 上級兵装 (→p37）'],\n            [78..79, '失敗…。かなりの損失を出してしまった…。 -3,000cdt'],\n            [80, '医療用品を獲得！ 調息値+［1］（全PC）'],\n            [81, '大型ソーラーパネルを獲得！ 整備値+［1］（全PC）'],\n            [82, '艦内用の環境設備を獲得！ サポート使用回数+［1］'],\n            [83, 'リニアガンを獲得。 →p37'],\n            [84, 'リニアマシンガンを獲得。 →p37'],\n            [85, 'ジャマ―ユニットを獲得。 →p37'],\n            [86, 'センサー+を獲得。 →p37'],\n            [87, 'パワーローダー++を獲得。 →p37'],\n            [88, 'サブバッテリー++を獲得。 →p37'],\n            [89, 'フレームカバーを獲得。 →p37'],\n            [90, '空振り……何の成果も得られなかった…。 0cdt'],\n            [91..92, '良質なA:GuSのパーツを獲得！機体の改造や予備パーツとして使えそうだ！ 改造Lv+［1］（上限：3Lv）'],\n            [93..95, 'A:GuSのパーツを獲得！機体の改造や予備パーツとして使えそうだ。 改造Lv+［1］（上限：1Lv）'],\n            [96..98, '多少傷ついているが、A:GuS1機を獲得！→10,000cdtで売却可能→10,000cdt支払えば補修して取得が可能。 （→p30～33）（→w23）'],\n            [99, 'A:GuS1機をほぼ完全な状態で獲得！ （→p30～33）（→w23）'],\n            [100, '掘り出し物を発見！25,000cdt以下の【上級携行兵装】一つを獲得！ 上級兵装 (→p37）'],\n          ]\n        ),\n        \"DEF\" => DiceTable::RangeTable.new(\n          \"赤字ペナルティー表\",\n          \"1D10\",\n          [\n            [1, '解雇 クルー1名を失う。10,000cdtを得る。'],\n            [2..3, '劣化 任意のチーム能力一つは-1Lv。10,000cdtを得る。'],\n            [4..5, '借金 次回の維持費が+20,000cdt。10,000cdtを得る。'],\n            [6..7, '酷使 各PCは最大HP-4。10,000cdtを得る。'],\n            [8..9, '売却 各PCはオプション以外の兵装を一つずつ廃棄。10,000cdtを得る。'],\n            [10, '解雇 クルー1名を失う。10,000cdtを得る。'],\n          ]\n        ),\n        # DiceTable::Tableが現状1D9に未対応\n        \"SPE\" => DiceTable::Table.new(\n          \"特殊戦況表\",\n          \"1D10\",\n          [\n            '混戦 以下のエリアのユニットをシャッフルする。♠：A⇔C ♣：B⇔D ♦：A⇔D ♥：B⇔C',\n            '乱戦 R中、すべての攻撃は［距離：○］になる。',\n            '逸失 敵拠点エリアのユニットを［♠♣：A ♦♥：B］に移動。味方拠点エリアのユニットを［♠♣：D ♦♥：C］に移動。',\n            '突風 艦船、オブジェクト以外の全ユニットを「風向き」方向に移動。',\n            '流砂 以下のエリアのユニットは脱出のため、MPとEPを［3］点失う。［♠：A ♣：B ♦：C ♥：D］',\n            '混乱 母船内でトラブル発生。R中、【整備】は行えない。［♠♥：味方側 ♣♦：敵側］',\n            '岩盤 以下のエリアのユニットは岩盤に乗り上げ、《クリティカル》が1回発生。［♠：A ♣：B ♦：C ♥：D］',\n            '混乱 R中、イニシア値を逆順で処理する。 ※【エイミング】等の高低も逆として処理する。',\n            '飛礫 飛礫によって、すべてのユニットはAPを［1D10］（以下のエリアでは［2D10］）点失う。［♠：A ♣：B ♦：C ♥：D］',\n            '雨 雨は砂を土へと変えてしまう。R中、全ユニット移動/突撃不可。',\n          ]\n        ),\n      }.freeze\n      register_prefix_from_super_class()\n      register_prefix('-?\\d*AGW', 'OMW', 'NMW', SECOND_ED_TABLES.keys)\n    end\n  end\nend\n"], :names=>["<main>", "self", "require", "<module:BCDice>", "<module:GameSystem>", "<class:SajinsenkiAGuS2E>", "initialize", "command", "@enabled_d9", "eval_game_system_specific_command", "$ret_or_1", "$ret_or_2", "$ret_or_3", "roll_ippan_west", "roll_hit_check_west", "roll_tables", "SECOND_ED_TABLES", "m", "match", "result", "roll_ippan", "sub", "block in roll_ippan_west", "block (2 levels) in roll_ippan_west", "Regexp", "last_match", "1", "change_fumble", "roll_hit_check", "block in roll_hit_check_west", "block (2 levels) in roll_hit_check_west", "nil?", "fumble_counts", "count", "rands", "block in change_fumble", "val", "block (2 levels) in change_fumble", ">=", "8", "2", "text=", "text", "failure=", "success=", "fumble=", "DiceTable::Table", "DiceTable", "new", "DiceTable::RangeTable", "3", "4", "5", "6", "7", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "100", "freeze", "register_prefix_from_super_class", "register_prefix", "keys", "SajinsenkiAGuS"], :mappings=>"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"}}]}