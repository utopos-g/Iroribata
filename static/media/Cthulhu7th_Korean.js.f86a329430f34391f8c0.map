{:version=>3, :sections=>[{:offset=>{:line=>0, :column=>0}, :map=>{:version=>3, :sourceRoot=>"", :sources=>["bcdice/game_system/Cthulhu7th_Korean.rb"], :sourcesContent=>["# frozen_string_literal: true\n\nmodule BCDice\n  module GameSystem\n    class Cthulhu7th_Korean < Base\n      # ゲームシステムの識別子\n      ID = 'Cthulhu7th:Korean'\n\n      # ゲームシステム名\n      NAME = '크툴루의 부름 7판'\n\n      # ゲームシステム名の読みがな\n      SORT_KEY = '国際化:Korean:크툴루의 부름 7판'\n\n      # ダイスボットの使い方\n      HELP_MESSAGE = <<~INFO_MESSAGE_TEXT\n        ・판정　CC(x)<=（목표치）\n        　x：보너스, 패널티 주사위：Bonus/Penalty Dice (2~-2). 생략 가능.\n        　대실패：Fumble／실패：Failure／보통 성공：Regular success／\n        　어려운 성공：Hard success／대단한 성공：Extreme success／\n        　대성공：Critical success　을 자동판정.\n        예）CC<=30　CC(2)<=50　CC(-1)<=75\n\n        ・조합 판정　(CBR(x,y))\n        　목표치 x 와 y 로 동시에 ％판정을 한다.\n        　예）CBR(50,20)\n\n        ・연사(Full Auto)판정　FAR(w,x,y,z)\n        　w：탄수(1~100), x：기능 수치(1~100), y：고장 넘버\n        　z：보너스, 패널티 주사위(-2~2). 생략 가능.\n        　명중수와 관통수, 잔탄수만을 계산. 데미지는 계산하지 않습니다.\n        예）FAR(25,70,98)　FAR(50,80,98,-1)\n      INFO_MESSAGE_TEXT\n\n      register_prefix('CC', 'CBR', 'FAR')\n\n      def initialize(command)\n        super(command)\n\n        @bonus_dice_range = (-2..2)\n      end\n\n      def eval_game_system_specific_command(command)\n        case command\n        when /CC/i\n          return getCheckResult(command)\n        when /CBR/i\n          return getCombineRoll(command)\n        when /FAR/i\n          return getFullAutoResult(command)\n        end\n\n        return nil\n      end\n\n      def getCheckResult(command)\n        nil unless /^CC([-\\d]+)?<=(\\d+)/i =~ command\n        bonus_dice_count = Regexp.last_match(1).to_i # 보너스, 패널티 주사위의 개수\n        diff = Regexp.last_match(2).to_i\n\n        return \"에러. 목표치는 1 이상입니다.\" if diff <= 0\n\n        unless @bonus_dice_range.include?(bonus_dice_count)\n          return \"에러. 보너스, 패널티 주사위의 수치는 \#{@bonus_dice_range.min}~\#{@bonus_dice_range.max}입니다.\"\n        end\n\n        output = \"\"\n        output += \"(1D100<=\#{diff})\"\n        output += \" 보너스, 패널티 주사위[\#{bonus_dice_count}]\"\n\n        units_digit = rollPercentD10\n        total_list = getTotalLists(bonus_dice_count, units_digit)\n\n        total = getTotal(total_list, bonus_dice_count)\n        result_text = getCheckResultText(total, diff)\n\n        output += \" ＞ \#{total_list.join(', ')} ＞ \#{total} ＞ \#{result_text}\"\n\n        return output\n      end\n\n      def rollPercentD10\n        dice = @randomizer.roll_once(10)\n        dice = 0 if dice == 10\n\n        return dice\n      end\n\n      def getTotalLists(bonus_dice_count, units_digit)\n        total_list = []\n\n        tens_digit_count = 1 + bonus_dice_count.abs\n        tens_digit_count.times do\n          bonus = rollPercentD10\n          total = (bonus * 10) + units_digit\n          total = 100 if total == 0\n\n          total_list.push(total)\n        end\n\n        return total_list\n      end\n\n      def getTotal(total_list, bonus_dice_count)\n        return total_list.min if bonus_dice_count >= 0\n\n        return total_list.max\n      end\n\n      def getCheckResultText(total, diff, fumbleable = false)\n        if total <= diff\n          return \"대성공\" if total == 1\n          return \"대단한 성공\" if total <= (diff / 5).to_i\n          return \"어려운 성공\" if total <= (diff / 2).to_i\n\n          return \"보통 성공\"\n        end\n\n        fumble_text = \"대실패\"\n\n        return fumble_text if total == 100\n\n        if total >= 96\n          if diff < 50\n            return fumble_text\n          else\n            return fumble_text if fumbleable\n          end\n        end\n\n        return \"실패\"\n      end\n\n      def getCombineRoll(command)\n        return nil unless /CBR\\((\\d+),(\\d+)\\)/i =~ command\n\n        diff_1 = Regexp.last_match(1).to_i\n        diff_2 = Regexp.last_match(2).to_i\n\n        total = @randomizer.roll_once(100)\n\n        result_1 = getCheckResultText(total, diff_1)\n        result_2 = getCheckResultText(total, diff_2)\n\n        successList = [\"대성공\", \"대단한 성공\", \"어려운 성공\", \"보통성공\"]\n\n        succesCount = 0\n        succesCount += 1 if successList.include?(result_1)\n        succesCount += 1 if successList.include?(result_2)\n        debug(\"succesCount\", succesCount)\n\n        rank =\n          if succesCount >= 2\n            \"성공\"\n          elsif  succesCount == 1\n            \"부분적 성공\"\n          else\n            \"실패\"\n          end\n\n        return \"(1d100<=\#{diff_1},\#{diff_2}) ＞ \#{total}[\#{result_1},\#{result_2}] ＞ \#{rank}\"\n      end\n\n      def getFullAutoResult(command)\n        return nil unless /^FAR\\((-?\\d+)(,(-?\\d+))(,(-?\\d+))(,(-?\\d+))?\\)/i =~ command\n\n        bullet_count = Regexp.last_match(1).to_i\n        diff = Regexp.last_match(3).to_i\n        broken_number = Regexp.last_match(5).to_i\n        bonus_dice_count = (Regexp.last_match(7) || 0).to_i\n\n        output = \"\"\n\n        # 최대(8번*(PC기능 수치 최대값/10))＝72발밖에 쏠 수 없으니 상한\n        bullet_count_limit = 100\n        if bullet_count > bullet_count_limit\n          output += \"\\n탄약이 너무 많습니다. 장전된 탄약을 \#{bullet_count_limit}개로 변경합니다.\\n\"\n          bullet_count = bullet_count_limit\n        end\n\n        return \"탄약은 1 이상입니다.\" if bullet_count <= 0\n        return \"목표치는 1 이상입니다.\" if diff <= 0\n\n        if broken_number < 0\n          output += \"\\n고장 넘버는 1 이상입니다. 마이너스 기호를 제거합니다.\\n\"\n          broken_number = broken_number.abs\n        end\n\n        unless @bonus_dice_range.include?(bonus_dice_count)\n          return \"\\n에러. 보너스, 패널티 주사위의 수치는 \#{@bonus_dice_range.min}~\#{@bonus_dice_range.max}입니다.\"\n        end\n\n        output += \"보너스, 패널티 주사위 [\#{bonus_dice_count}]\"\n        output += rollFullAuto(bullet_count, diff, broken_number, bonus_dice_count)\n\n        return output\n      end\n\n      def rollFullAuto(bullet_count, diff, broken_number, dice_num)\n        output = \"\"\n        loopCount = 0\n\n        counts = {\n          hit_bullet: 0,\n          impale_bullet: 0,\n          bullet: bullet_count,\n        }\n\n        # 난이도 변경용 루프\n        4.times do |more_difficlty|\n          output += getNextDifficltyMessage(more_difficlty)\n\n          # 패널티 다이스를 줄이면서 굴리는 용 루프\n          while dice_num >= @bonus_dice_range.min\n\n            loopCount += 1\n            hit_result, total, total_list = getHitResultInfos(dice_num, diff, more_difficlty)\n            output += \"\\n\#{loopCount}번째: ＞ \#{total_list.join(', ')} ＞ \#{hit_result}\"\n\n            if total >= broken_number\n              output += \" 총알 걸림\"\n              return getHitResultText(output, counts)\n            end\n\n            hit_type = getHitType(more_difficlty, hit_result)\n            hit_bullet, impale_bullet, lost_bullet = getBulletResults(counts[:bullet], hit_type, diff)\n\n            counts[:hit_bullet] += hit_bullet\n            counts[:impale_bullet] += impale_bullet\n            counts[:bullet] -= lost_bullet\n\n            return getHitResultText(output, counts) if counts[:bullet] <= 0\n\n            dice_num -= 1\n          end\n\n          dice_num += 1\n        end\n\n        return getHitResultText(output, counts)\n      end\n\n      def getHitResultInfos(dice_num, diff, more_difficlty)\n        units_digit = rollPercentD10\n        total_list = getTotalLists(dice_num, units_digit)\n        total = getTotal(total_list, dice_num)\n\n        fumbleable = getFumbleable(more_difficlty)\n        hit_result = getCheckResultText(total, diff, fumbleable)\n\n        return hit_result, total, total_list\n      end\n\n      def getHitResultText(output, counts)\n        return \"\#{output}\\n＞ \#{counts[:hit_bullet]}발이 명중, \#{counts[:impale_bullet]}발이 관통, 잔탄 \#{counts[:bullet]}발\"\n      end\n\n      def getHitType(more_difficlty, hit_result)\n        successList, impaleBulletList = getSuccessListImpaleBulletList(more_difficlty)\n\n        return :hit if successList.include?(hit_result)\n        return :impale if impaleBulletList.include?(hit_result)\n\n        return \"\"\n      end\n\n      def getBulletResults(bullet_count, hit_type, diff)\n        bullet_set_count = getSetOfBullet(diff)\n        hit_bullet_count_base = getHitBulletCountBase(diff, bullet_set_count)\n        impale_bullet_count_base = (bullet_set_count / 2.to_f)\n\n        lost_bullet_count = 0\n        hit_bullet_count = 0\n        impale_bullet_count = 0\n\n        if !isLastBulletTurn(bullet_count, bullet_set_count)\n\n          case hit_type\n          when :hit\n            hit_bullet_count = hit_bullet_count_base # 보통명중한 탄수의 계산\n\n          when :impale\n            hit_bullet_count = impale_bullet_count_base.floor\n            impale_bullet_count = impale_bullet_count_base.ceil # 관통한 탄수의 계산\n          end\n\n          lost_bullet_count = bullet_set_count\n\n        else\n\n          case hit_type\n          when :hit\n            hit_bullet_count = getLastHitBulletCount(bullet_count)\n\n          when :impale\n            halfbull = bullet_count / 2.to_f\n\n            hit_bullet_count = halfbull.floor\n            impale_bullet_count = halfbull.ceil\n          end\n\n          lost_bullet_count = bullet_count\n        end\n\n        return hit_bullet_count.to_i, impale_bullet_count.to_i, lost_bullet_count.to_i\n      end\n\n      def getSuccessListImpaleBulletList(more_difficlty)\n        successList = []\n        impaleBulletList = []\n\n        case more_difficlty\n        when 0\n          successList = [\"어려운 성공\", \"보통 성공\"]\n          impaleBulletList = [\"대성공\", \"대단한 성공\"]\n        when 1\n          successList = [\"어려운 성공\"]\n          impaleBulletList = [\"대성공\", \"대단한 성공\"]\n        when 2\n          successList = []\n          impaleBulletList = [\"대성공\", \"대단한 성공\"]\n        when 3\n          successList = [\"대성공\"]\n          impaleBulletList = []\n        end\n\n        return successList, impaleBulletList\n      end\n\n      def getNextDifficltyMessage(more_difficlty)\n        case more_difficlty\n        when 1\n          return \"\\n    난이도가 어려운 성공으로 변경\"\n        when 2\n          return \"\\n    난이도가 대단한 성공으로 변경\"\n        when 3\n          return \"\\n    난이도가 대성공으로 변경\"\n        end\n\n        return \"\"\n      end\n\n      def getSetOfBullet(diff)\n        bullet_set_count = (diff / 10).to_i\n\n        if (diff >= 1) && (diff < 10)\n          bullet_set_count = 1 # 기능 수치가 9 이하일 때의 최저수치 보장 처리\n        end\n\n        return bullet_set_count\n      end\n\n      def getHitBulletCountBase(diff, bullet_set_count)\n        hit_bullet_count_base = (bullet_set_count / 2).to_i\n\n        if (diff >= 1) && (diff < 10)\n          hit_bullet_count_base = 1 # 기능 수치가 9 이하일 때의 최저수치 보장\n        end\n\n        return hit_bullet_count_base\n      end\n\n      def isLastBulletTurn(bullet_count, bullet_set_count)\n        ((bullet_count - bullet_set_count) < 0)\n      end\n\n      def getLastHitBulletCount(bullet_count)\n        # 잔탄 1발일 때의 최저수치 보장 처리\n        if bullet_count == 1\n          return 1\n        end\n\n        count = (bullet_count / 2.to_f).floor\n        return count\n      end\n\n      def getFumbleable(more_difficlty)\n        # 성공이 49 이하일때만이기 때문에 펌블치는 상승\n        return (more_difficlty >= 1)\n      end\n    end\n  end\nend\n"], :names=>["<main>", "<module:BCDice>", "<module:GameSystem>", "<class:Cthulhu7th_Korean>", "self", "register_prefix", "initialize", "command", "@bonus_dice_range", "-2", "2", "eval_game_system_specific_command", "$ret_or_1", "getCheckResult", "getCombineRoll", "getFullAutoResult", "=~", "bonus_dice_count", "Regexp", "last_match", "1", "to_i", "diff", "<=", "0", "include?", "min", "max", "output", "+", "units_digit", "rollPercentD10", "total_list", "getTotalLists", "total", "getTotal", "result_text", "getCheckResultText", "join", "dice", "@randomizer", "roll_once", "10", "tens_digit_count", "abs", "times", "block in getTotalLists", "block (2 levels) in getTotalLists", "bonus", "*", "100", "push", ">=", "fumbleable", "/", "5", "fumble_text", "96", "<", "50", "diff_1", "diff_2", "result_1", "result_2", "successList", "succesCount", "debug", "rank", "bullet_count", "3", "broken_number", "7", "bullet_count_limit", ">", "rollFullAuto", "dice_num", "loopCount", "counts", "4", "block in rollFullAuto", "more_difficlty", "block (2 levels) in rollFullAuto", "getNextDifficltyMessage", "getHitResultInfos", "hit_result", "getHitResultText", "hit_type", "getHitType", "getBulletResults", "[]", "hit_bullet", "impale_bullet", "lost_bullet", "[]=", "-", "getFumbleable", "getSuccessListImpaleBulletList", "impaleBulletList", "bullet_set_count", "getSetOfBullet", "hit_bullet_count_base", "getHitBulletCountBase", "impale_bullet_count_base", "to_f", "lost_bullet_count", "hit_bullet_count", "impale_bullet_count", "isLastBulletTurn", "floor", "ceil", "getLastHitBulletCount", "halfbull", "count", "Base"], :mappings=>"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"}}]}