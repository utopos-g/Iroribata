{:version=>3, :sections=>[{:offset=>{:line=>0, :column=>0}, :map=>{:version=>3, :sourceRoot=>"", :sources=>["bcdice/game_system/GhostLive.rb"], :sourcesContent=>["# frozen_string_literal: true\n\nmodule BCDice\n  module GameSystem\n    class GhostLive < Base\n      # ゲームシステムの識別子\n      ID = 'GhostLive'\n\n      # ゲームシステム名\n      NAME = '実況ゴーストライヴ'\n\n      # ゲームシステム名の読みがな\n      SORT_KEY = 'しつきようこおすとらいふ'\n\n      # ダイスボットの使い方\n      HELP_MESSAGE = <<~MESSAGE\n        ■追加目標表（p11）\n        ATT, AdditionalTargetTable\n\n        ■種別：地縛霊（p26）\n        □Ａ.霊障リスト\n        JHA, JibakuHauntA\n        □Ｂ.霊障効果リスト\n        JHB, JibakuHauntB\n\n        ■種別：シャイな幽霊（p27）\n        □Ａ.霊障リスト\n        SHA, ShyHauntA\n        □Ｂ.霊障効果リスト\n        SHB, ShyHauntB\n\n        ■種別：ぐちゃぐちゃ（p28）\n        □Ａ.霊障リスト\n        GHA, GuchaHauntA\n        □Ｂ.霊障効果リスト\n        GHB, GuchaHauntB\n      MESSAGE\n\n      def eval_game_system_specific_command(command)\n        command = ALIAS[command] || command\n        roll_tables(command, TABLES)\n      end\n\n      TABLES = {\n        \"AdditionalTargetTable\" => DiceTable::Table.new(\n          \"追加目標表\",\n          \"1D6\",\n          [\n            \"オバケを撮影する。（依頼主：専門家／報酬：１Ｌ）\",\n            \"誰かひとりが霊障を［サイクル数］回受ける。（依頼主：専門家／報酬：［サイクル数］Ｌ）\",\n            \"誰かひとりが［精神力］を10以下の状態で帰る。（依頼主：専門家／報酬：３Ｌ）\",\n            \"［精神力］の平均が20以下の状態で帰る。（依頼主：リスナー／報酬：［視聴回数］を10倍）\",\n            \"全員がスマホ以外の［アイテム］を１個だけ持ち込んで生還する。（依頼主：リスナー／報酬：［視聴回数］を10倍）\",\n            \"すべての［回収品］を集める。（依頼主：専門家／報酬：５Ｌ）\",\n          ]\n        ),\n        \"JibakuHauntA\" => DiceTable::Table.new(\n          \"地縛霊：霊障リスト\",\n          \"1D6\",\n          [\n            \"隙間――家具の隙間、扉の隙間、そんな暗がりから視線を感じる。\",\n            \"腐臭――吐き気を催すような、下水に似た臭いが漂ってくる。\",\n            \"吐息――「ハァ……」耳元に、やけに湿った吐息が吹きかけられる。\",\n            \"足音――立ち止まる度に、ひとつ多く足音が響く。誰か、いる……？\",\n            \"背後――振り向いても、そこには誰もいない。それなのに、ずっと後ろに気配を感じる。\",\n            \"鏡――鏡に背を向けた瞬間、あり得ない強さでそちらへ引き寄せられた。肩には手の形のアザができている。\",\n          ]\n        ),\n        \"JibakuHauntB\" => DiceTable::Table.new(\n          \"地縛霊：霊障効果リスト\",\n          \"1D6\",\n          [\n            \"［精神力］減少：［１Ｄ２＋ＰＣ人数］点／［視聴回数］増加：とくになし／特殊効果：とくになし\",\n            \"［精神力］減少：［１Ｄ４＋ＰＣ人数］点／［視聴回数］増加：とくになし／特殊効果：とくになし\",\n            \"［精神力］減少：［１Ｄ６＋ＰＣ人数］点／［視聴回数］増加：２倍／特殊効果：とくになし\",\n            \"［精神力］減少：［１Ｄ10＋ＰＣ人数］点／［視聴回数］増加：３倍／特殊効果：シーンに登場しているＰＣの［アイテム］を１つ破壊する。\",\n            \"［精神力］減少：［１Ｄ20＋ＰＣ人数］点／［視聴回数］増加：５倍／特殊効果：シーンに登場しているＰＣのスマホを破壊する。\",\n            \"［精神力］減少：［１Ｄ100＋ＰＣ人数］点／［視聴回数］増加：10倍／特殊効果：シーンに登場しているＰＣのスマホを破壊する。\",\n          ]\n        ),\n        \"ShyHauntA\" => DiceTable::Table.new(\n          \"シャイな幽霊：霊障リスト\",\n          \"1D6\",\n          [\n            \"倦怠感――歩くのも辛いくらいの倦怠感。生きているのも辛い。\",\n            \"ラップ音――弾けるような、叩くような音が連続して聞こえる。\",\n            \"空飛ぶ皿――棚に収まっていた食器が、不意に飛び出し、けたたましい音を立てて砕けていく。\",\n            \"頭痛――頭が、割れそうに痛い。小さな物音ですら頭に響いてくる。\",\n            \"点滅――灯りが明滅する。……あれ、ここ電気通ってたっけ？\",\n            \"血文字――壁に、床に、赤⿊い液体が滲み出す。それは文字を形作った。「か　え　れ」\",\n          ]\n        ),\n        \"ShyHauntB\" => DiceTable::Table.new(\n          \"シャイな幽霊：霊障効果リスト\",\n          \"1D6\",\n          [\n            \"［精神力］減少：［２＋ＰＣ人数］点／［視聴回数］増加：とくになし／特殊効果：とくになし\",\n            \"［精神力］減少：［４＋ＰＣ人数］点／［視聴回数］増加：２倍／特殊効果：シーンに登場しているＰＣがふたりの場合、追加で［精神力］を２減少させる。\",\n            \"［精神力］減少：［６＋ＰＣ人数］点／［視聴回数］増加：３倍／特殊効果：シーンに登場しているＰＣがひとりの場合、追加で［精神力］を４減少させる。\",\n            \"［精神力］減少：［10＋ＰＣ人数］点／［視聴回数］増加：５倍／特殊効果：シーンに登場しているＰＣがふたりの場合、追加で［精神力］を６減少させる。\",\n            \"［精神力］減少：［20＋ＰＣ人数］点／［視聴回数］増加：10倍／特殊効果：シーンに登場しているＰＣがひとりの場合、追加で［精神力］を２減少させる。\",\n            \"［精神力］減少：［40＋ＰＣ人数］点／［視聴回数］増加：20倍／特殊効果：シーンに登場しているＰＣのスマホを破壊する。\",\n          ]\n        ),\n        \"GuchaHauntA\" => DiceTable::Table.new(\n          \"ぐちゃぐちゃ：霊障リスト\",\n          \"1D6\",\n          [\n            \"走る人形――ひび割れた人形が落ちている。一瞬視線をそらした瞬間、それはありえない動きで走り去っていった。\",\n            \"血痕――天井から血が滴ってくる。その量は、おおよそ人一人分……いや、それ以上だ。\",\n            \"着信――スマホの着信音が鳴る。こんな時に誰が――表示されていたのは、死んだはずの知り合いの名前だった。\",\n            \"自分に似た他人――自分にそっくりな人が目の前に立っていた、気がする。\",\n            \"衝撃――誰かに思いっきり押された気がしたのに誰もいない。\",\n            \"記憶がない――数分間のことを何も覚えてない。コメント欄がリスナーの心配する声でいっぱいだ。いったい何が……？\",\n          ]\n        ),\n        \"GuchaHauntB\" => DiceTable::Table.new(\n          \"ぐちゃぐちゃ：霊障効果リスト\",\n          \"1D6\",\n          [\n            \"［精神力］減少：［５＋ＰＣ人数］点／［視聴回数］増加：２倍／特殊効果：とくになし\",\n            \"［精神力］減少：［10＋ＰＣ人数］点／［視聴回数］増加：３倍／特殊効果：とくになし\",\n            \"［精神力］減少：［２Ｄ10＋ＰＣ人数］点／［視聴回数］増加：４倍／特殊効果：シーンに登場しているＰＣがふたりの場合、追加で［精神力］を５減少させる。\",\n            \"［精神力］減少：［３Ｄ10＋ＰＣ人数］点／［視聴回数］増加：５倍／特殊効果：シーンに登場しているＰＣがひとりの場合、［アイテム］をランダムに１つ壊す。\",\n            \"［精神力］減少：［１Ｄ100＋ＰＣ人数］点／［視聴回数］増加：10倍／特殊効果：シーンに登場しているＰＣのスマホを破壊する。\",\n            \"［精神力］減少：［１Ｄ100＋10＋ＰＣ人数］点／［視聴回数］増加：20倍／特殊効果：すべてのＰＣのスマホを破壊する。\",\n          ]\n        ),\n      }.transform_keys(&:upcase).freeze\n\n      ALIAS = {\n        \"ATT\" => \"AdditionalTargetTable\",\n        \"JHA\" => \"JibakuHauntA\",\n        \"JHB\" => \"JibakuHauntB\",\n        \"SHA\" => \"ShyHauntA\",\n        \"SHB\" => \"ShyHauntB\",\n        \"GHA\" => \"GuchaHauntA\",\n        \"GHB\" => \"GuchaHauntB\",\n      }.transform_values(&:upcase).freeze\n\n      register_prefix(TABLES.keys, ALIAS.keys)\n    end\n  end\nend\n"], :names=>["<main>", "<module:BCDice>", "<module:GameSystem>", "<class:GhostLive>", "eval_game_system_specific_command", "command", "$ret_or_1", "ALIAS", "[]", "self", "roll_tables", "TABLES", "transform_keys", "DiceTable::Table", "DiceTable", "new", "to_proc", "freeze", "transform_values", "register_prefix", "keys", "Base"], :mappings=>"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"}}]}