{:version=>3, :sections=>[{:offset=>{:line=>0, :column=>0}, :map=>{:version=>3, :sourceRoot=>"", :sources=>["bcdice/game_system/ShadowRun4.rb"], :sourcesContent=>["# frozen_string_literal: true\n\nmodule BCDice\n  module GameSystem\n    class ShadowRun4 < Base\n      # ゲームシステムの識別子\n      ID = 'ShadowRun4'\n\n      # ゲームシステム名\n      NAME = 'シャドウラン 4th Edition'\n\n      # ゲームシステム名の読みがな\n      SORT_KEY = 'しやとうらん4'\n\n      # ダイスボットの使い方\n      HELP_MESSAGE = <<~INFO_MESSAGE_TEXT\n        個数振り足しロール(xRn)の境界値を6にセット、バラバラロール(xBn)の目標値を5以上にセットします。\n        BコマンドとRコマンド時に、グリッチの表示を行います。\n      INFO_MESSAGE_TEXT\n\n      def initialize(command)\n        super(command)\n        @sort_add_dice = true\n        @sort_barabara_dice = true\n        @reroll_dice_reroll_threshold = 6 # RerollDiceで振り足しをする出目の閾値\n\n        @default_cmp_op = :>=\n        @default_target_number = 5\n      end\n\n      # シャドウラン4版用グリッチ判定\n      def grich_text(numberSpot1, dice_cnt_total, successCount)\n        dice_cnt_total_half = (1.0 * dice_cnt_total / 2)\n        debug(\"dice_cnt_total_half\", dice_cnt_total_half)\n\n        unless numberSpot1 >= dice_cnt_total_half\n          return nil\n        end\n\n        # グリッチ！\n        if successCount == 0\n          'クリティカルグリッチ'\n        else\n          'グリッチ'\n        end\n      end\n    end\n  end\nend\n"], :names=>["<main>", "<module:BCDice>", "<module:GameSystem>", "<class:ShadowRun4>", "initialize", "command", "self", "@sort_add_dice", "@sort_barabara_dice", "@reroll_dice_reroll_threshold", "6", "@default_cmp_op", "@default_target_number", "5", "grich_text", "numberSpot1", "dice_cnt_total", "successCount", "dice_cnt_total_half", "/", "*", "2", "debug", ">=", "0", "Base"], :mappings=>"AAAAA,2BAAAA;EAAAA;;EAEAA,OAAAC;EAAAA;;IAAAA;;IACEA,OAAAC;IAAAA;;MAAAA;;MACEA,OAAAC;MAAAA;;QAAAA;;;QAEE,8BAAKA,YAAL;QAGA,gCAAOA,oBAAP;QAGA,oCAAWA,SAAX;QAGA,wCACNA,yDADqB,GAErBA,+BAFM;;AAKAC,QAAAA,0BAAAA,sBAAeC,OAAfD;AAAAA,UAAAA;;UAAAA;;UACE,OAAAE,IAAA,EAAA,0DAAA,cAAA,EAAA,CAAMD,OAAN,CAAA,EAAA,IAAA;UACAE,qBAAiB;UACjBC,0BAAsB;UACtBC,oCAAgCC;UAEhCC,sBAAkB;UAClBP,OAAAQ,CAAAA,6BAAyBC,CAAzBD;QAPFR,CAAAA;QAWAD,OAAAW,0BAAAA,sBAAeC,WAAD,EAAcC,cAAd,EAA8BC,YAA5CH;AAAAA,UAAAA;;;UACEI,sBAA4CC,WAAjBC,UAAJ,GAAIA,EAAEJ,cAAFI,CAAiBD,EAAEE,CAAFF;UAC5Cb,IAAAgB,OAAAA,CAAMR,qBAAN,EAA6BI,mBAA7BI;UAEA,KAAA,QAAmBC,OAAZR,WAAYQ,EAAGL,mBAAHK,CAAnB,CAAA;YACE,OAAO;UADT;UAKA,IAAA,MAAGN,YAAH,EAAmBO,CAAnB,CAAA;YACEV,OAAAA;UADF;YAGEA,OAAAA;UAHF;QATFA,CAAAA;MA3BFX,GAAAA,WAAAA,EAAmBsB,UAAnBtB;IADFD,GAAAA,WAAAA;EADFD,GAAAA,WAAAA;AAFAD;"}}]}